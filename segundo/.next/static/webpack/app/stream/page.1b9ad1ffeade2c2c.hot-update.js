"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/stream/page",{

/***/ "(app-pages-browser)/./src/services/firebase.ts":
/*!**********************************!*\
  !*** ./src/services/firebase.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   createUserWithEmailVerification: () => (/* binding */ createUserWithEmailVerification),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   deleteUserAccount: () => (/* binding */ deleteUserAccount),\n/* harmony export */   exploreFirebaseData: () => (/* binding */ exploreFirebaseData),\n/* harmony export */   getCurrentStreamingData: () => (/* binding */ getCurrentStreamingData),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   isEmailVerified: () => (/* binding */ isEmailVerified),\n/* harmony export */   isUserAuthenticated: () => (/* binding */ isUserAuthenticated),\n/* harmony export */   listenToStreamControl: () => (/* binding */ listenToStreamControl),\n/* harmony export */   listenToStreamingData: () => (/* binding */ listenToStreamingData),\n/* harmony export */   resendEmailVerification: () => (/* binding */ resendEmailVerification),\n/* harmony export */   sendPasswordReset: () => (/* binding */ sendPasswordReset),\n/* harmony export */   signInUser: () => (/* binding */ signInUser),\n/* harmony export */   signOutUser: () => (/* binding */ signOutUser),\n/* harmony export */   updateStreamControl: () => (/* binding */ updateStreamControl),\n/* harmony export */   updateUserPassword: () => (/* binding */ updateUserPassword)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"(app-pages-browser)/./node_modules/firebase/app/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var _config_firebase_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config/firebase.config */ \"(app-pages-browser)/./src/config/firebase.config.ts\");\n\n\n\n\n// Validate Firebase configuration on startup\n(0,_config_firebase_config__WEBPACK_IMPORTED_MODULE_3__.validateFirebaseConfig)();\n// Initialize Firebase\nconst app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(_config_firebase_config__WEBPACK_IMPORTED_MODULE_3__.firebaseConfig);\nconst db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getFirestore)(app);\nconst auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.getAuth)(app);\n// Helper function to safely convert Firestore values to Date\nconst toSafeDate = (value)=>{\n    if (!value) return new Date(0);\n    if (value instanceof Date) return value;\n    if (typeof value === \"string\" || typeof value === \"number\") {\n        const d = new Date(value);\n        return isNaN(d.getTime()) ? new Date(0) : d;\n    }\n    if (typeof value === \"object\" && value !== null && \"toDate\" in value) {\n        return value.toDate();\n    }\n    const d = new Date(value);\n    return isNaN(d.getTime()) ? new Date(0) : d;\n};\n// Listen to streaming data in real-time\nconst listenToStreamingData = (callback)=>{\n    console.log(\"🔍 Segundo listening to: streaming/avryzcqeibphtefihmsrjfbugeq1\");\n    const streamingRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(db, \"streaming\", \"avryzcqeibphtefihmsrjfbugeq1\");\n    return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.onSnapshot)(streamingRef, (doc)=>{\n        console.log(\"🔍 Firebase snapshot received:\", doc.exists() ? \"Document exists\" : \"Document does not exist\");\n        if (doc.exists()) {\n            const raw = doc.data();\n            // Handle mobile app's data structure\n            const overview = raw.overview || {};\n            const roundsData = raw.rounds || {};\n            // Debug: Log the raw data structure\n            console.log(\"🔍 Raw Firebase data:\", raw);\n            console.log(\"🔍 Overview data:\", overview);\n            console.log(\"🔍 Raw teams:\", raw.teams);\n            console.log(\"🔍 Overview teams:\", overview.teams);\n            console.log(\"🔍 Rounds data:\", roundsData);\n            console.log(\"🔍 Champion data:\", raw.champion);\n            // Check for other possible team data locations\n            console.log(\"🔍 All raw data keys:\", Object.keys(raw));\n            console.log(\"🔍 All overview keys:\", Object.keys(overview));\n            // Look for teams in other possible locations\n            if (raw.teamsData) console.log(\"🔍 teamsData:\", raw.teamsData);\n            if (raw.teamList) console.log(\"🔍 teamList:\", raw.teamList);\n            if (raw.participants) console.log(\"🔍 participants:\", raw.participants);\n            if (overview.teamsData) console.log(\"🔍 overview.teamsData:\", overview.teamsData);\n            if (overview.teamList) console.log(\"🔍 overview.teamList:\", overview.teamList);\n            if (overview.participants) console.log(\"🔍 overview.participants:\", overview.participants);\n            // Debug: Log detailed rounds structure\n            Object.entries(roundsData).forEach((param)=>{\n                let [roundKey, roundData] = param;\n                console.log(\"\\uD83D\\uDD0D Round \".concat(roundKey, \":\"), roundData);\n                if (roundData && typeof roundData === \"object\" && roundData !== null && \"matches\" in roundData && Array.isArray(roundData.matches)) {\n                    const round = roundData;\n                    round.matches.forEach((match, matchIndex)=>{\n                        console.log(\"\\uD83D\\uDD0D Match \".concat(matchIndex, \" in \").concat(roundKey, \":\"), match);\n                        if (match && typeof match === \"object\" && match !== null) {\n                            const matchObj = match;\n                            if (matchObj.team1) console.log(\"\\uD83D\\uDD0D Team1 details:\", matchObj.team1);\n                            if (matchObj.team2) console.log(\"\\uD83D\\uDD0D Team2 details:\", matchObj.team2);\n                        }\n                    });\n                }\n            });\n            // Extract teams from rounds data if teams array is empty\n            let teams = [];\n            console.log(\"🔍 Raw teams array:\", raw.teams);\n            console.log(\"🔍 Overview teams array:\", overview.teams);\n            if (Array.isArray(raw.teams) && raw.teams.length > 0) {\n                console.log(\"🔍 Using raw.teams:\", raw.teams.length, \"teams\");\n                teams = raw.teams;\n            } else if (Array.isArray(overview.teams) && overview.teams.length > 0) {\n                console.log(\"🔍 Using overview.teams:\", overview.teams.length, \"teams\");\n                teams = overview.teams;\n            } else {\n                console.log(\"🔍 Extracting teams from rounds data...\");\n                // Extract teams from rounds data\n                const teamMap = new Map();\n                Object.values(roundsData).forEach((round, roundIndex)=>{\n                    console.log(\"\\uD83D\\uDD0D Processing round \".concat(roundIndex, \":\"), round);\n                    if (round && round.matches && Array.isArray(round.matches)) {\n                        // Check for team1 and team2 in matches\n                        const roundData = round;\n                        if (roundData.matches && Array.isArray(roundData.matches)) {\n                            roundData.matches.forEach((match)=>{\n                                if (match && typeof match === \"object\" && match !== null && \"team1\" in match && \"team2\" in match) {\n                                    var _matchData_team1, _matchData_team2;\n                                    const matchData = match;\n                                    if (matchData.team1 && matchData.team1.id && ((_matchData_team1 = matchData.team1) === null || _matchData_team1 === void 0 ? void 0 : _matchData_team1.name) && matchData.team1.name !== \"Unknown Team\" && matchData.team1.name.trim().length > 0) {\n                                        var _matchData_team11;\n                                        console.log(\"\\uD83D\\uDD0D Found team1: \".concat(((_matchData_team11 = matchData.team1) === null || _matchData_team11 === void 0 ? void 0 : _matchData_team11.name) || \"Unknown\", \" (\").concat(matchData.team1.id, \")\"));\n                                        if (!teamMap.has(matchData.team1.id)) {\n                                            var _matchData_team12, _matchData_team13;\n                                            // Parse playerNames string into individual players\n                                            const players = [];\n                                            if (matchData.team1.playerNames && typeof matchData.team1.playerNames === \"string\") {\n                                                var _matchData_team14, _matchData_team15, _matchData_team16, _matchData_team17;\n                                                console.log(\"\\uD83D\\uDD0D Team1 \".concat(((_matchData_team14 = matchData.team1) === null || _matchData_team14 === void 0 ? void 0 : _matchData_team14.name) || \"Unknown\", \" playerNames string:\"), matchData.team1.playerNames);\n                                                const rawPlayerNames = matchData.team1.playerNames.split(\",\");\n                                                console.log(\"\\uD83D\\uDD0D Team1 \".concat(((_matchData_team15 = matchData.team1) === null || _matchData_team15 === void 0 ? void 0 : _matchData_team15.name) || \"Unknown\", \" raw split:\"), rawPlayerNames);\n                                                const trimmedPlayerNames = rawPlayerNames.map((name)=>name.trim());\n                                                console.log(\"\\uD83D\\uDD0D Team1 \".concat(((_matchData_team16 = matchData.team1) === null || _matchData_team16 === void 0 ? void 0 : _matchData_team16.name) || \"Unknown\", \" after trim:\"), trimmedPlayerNames);\n                                                const playerNames = trimmedPlayerNames.filter((name)=>{\n                                                    var _matchData_team1;\n                                                    const isValid = name && name.length > 0 && name !== \"Player\";\n                                                    console.log(\"\\uD83D\\uDD0D Team1 \".concat(((_matchData_team1 = matchData.team1) === null || _matchData_team1 === void 0 ? void 0 : _matchData_team1.name) || \"Unknown\", ' filtering \"').concat(name, '\": ').concat(isValid));\n                                                    return isValid;\n                                                });\n                                                console.log(\"\\uD83D\\uDD0D Team1 \".concat(((_matchData_team17 = matchData.team1) === null || _matchData_team17 === void 0 ? void 0 : _matchData_team17.name) || \"Unknown\", \" parsed player names:\"), playerNames);\n                                                playerNames.forEach((playerName, index)=>{\n                                                    players.push({\n                                                        id: \"\".concat(matchData.team1.id, \"_player_\").concat(index),\n                                                        name: playerName,\n                                                        captain: false\n                                                    });\n                                                });\n                                            }\n                                            console.log(\"\\uD83D\\uDD0D Creating team1: \".concat(((_matchData_team12 = matchData.team1) === null || _matchData_team12 === void 0 ? void 0 : _matchData_team12.name) || \"Unknown\", \" with \").concat(players.length, \" players\"));\n                                            teamMap.set(matchData.team1.id, {\n                                                id: matchData.team1.id,\n                                                name: ((_matchData_team13 = matchData.team1) === null || _matchData_team13 === void 0 ? void 0 : _matchData_team13.name) || \"Unknown\",\n                                                manager: \"\",\n                                                captain: \"\",\n                                                players: players,\n                                                color: \"\",\n                                                icon: \"\"\n                                            });\n                                        }\n                                    }\n                                    if (matchData.team2 && matchData.team2.id && ((_matchData_team2 = matchData.team2) === null || _matchData_team2 === void 0 ? void 0 : _matchData_team2.name) && matchData.team2.name !== \"Unknown Team\" && matchData.team2.name.trim().length > 0) {\n                                        var _matchData_team21;\n                                        console.log(\"\\uD83D\\uDD0D Found team2: \".concat(((_matchData_team21 = matchData.team2) === null || _matchData_team21 === void 0 ? void 0 : _matchData_team21.name) || \"Unknown\", \" (\").concat(matchData.team2.id, \")\"));\n                                        if (!teamMap.has(matchData.team2.id)) {\n                                            var _matchData_team22, _matchData_team23;\n                                            // Parse playerNames string into individual players\n                                            const players = [];\n                                            if (matchData.team2.playerNames && typeof matchData.team2.playerNames === \"string\") {\n                                                var _matchData_team24, _matchData_team25, _matchData_team26, _matchData_team27;\n                                                console.log(\"\\uD83D\\uDD0D Team2 \".concat(((_matchData_team24 = matchData.team2) === null || _matchData_team24 === void 0 ? void 0 : _matchData_team24.name) || \"Unknown\", \" playerNames string:\"), matchData.team2.playerNames);\n                                                const rawPlayerNames = matchData.team2.playerNames.split(\",\");\n                                                console.log(\"\\uD83D\\uDD0D Team2 \".concat(((_matchData_team25 = matchData.team2) === null || _matchData_team25 === void 0 ? void 0 : _matchData_team25.name) || \"Unknown\", \" raw split:\"), rawPlayerNames);\n                                                const trimmedPlayerNames = rawPlayerNames.map((name)=>name.trim());\n                                                console.log(\"\\uD83D\\uDD0D Team2 \".concat(((_matchData_team26 = matchData.team2) === null || _matchData_team26 === void 0 ? void 0 : _matchData_team26.name) || \"Unknown\", \" after trim:\"), trimmedPlayerNames);\n                                                const playerNames = trimmedPlayerNames.filter((name)=>{\n                                                    var _matchData_team2;\n                                                    const isValid = name && name.length > 0 && name !== \"Player\";\n                                                    console.log(\"\\uD83D\\uDD0D Team2 \".concat(((_matchData_team2 = matchData.team2) === null || _matchData_team2 === void 0 ? void 0 : _matchData_team2.name) || \"Unknown\", ' filtering \"').concat(name, '\": ').concat(isValid));\n                                                    return isValid;\n                                                });\n                                                console.log(\"\\uD83D\\uDD0D Team2 \".concat(((_matchData_team27 = matchData.team2) === null || _matchData_team27 === void 0 ? void 0 : _matchData_team27.name) || \"Unknown\", \" parsed player names:\"), playerNames);\n                                                playerNames.forEach((playerName, index)=>{\n                                                    players.push({\n                                                        id: \"\".concat(matchData.team2.id, \"_player_\").concat(index),\n                                                        name: playerName,\n                                                        captain: false\n                                                    });\n                                                });\n                                            }\n                                            console.log(\"\\uD83D\\uDD0D Creating team2: \".concat(((_matchData_team22 = matchData.team2) === null || _matchData_team22 === void 0 ? void 0 : _matchData_team22.name) || \"Unknown\", \" with \").concat(players.length, \" players\"));\n                                            teamMap.set(matchData.team2.id, {\n                                                id: matchData.team2.id,\n                                                name: ((_matchData_team23 = matchData.team2) === null || _matchData_team23 === void 0 ? void 0 : _matchData_team23.name) || \"Unknown\",\n                                                manager: \"\",\n                                                captain: \"\",\n                                                players: players,\n                                                color: \"\",\n                                                icon: \"\"\n                                            });\n                                        }\n                                    }\n                                }\n                            });\n                        }\n                    }\n                });\n                teams = Array.from(teamMap.values());\n            }\n            // Debug: Log team and player counts\n            console.log(\"🔍 Total teams extracted:\", teams.length);\n            teams.forEach((team, index)=>{\n                var _team_players;\n                console.log(\"\\uD83D\\uDD0D Team \".concat(index + 1, \" (\").concat(team.name, \"): \").concat(((_team_players = team.players) === null || _team_players === void 0 ? void 0 : _team_players.length) || 0, \" players\"));\n                if (team.players) {\n                    team.players.forEach((player, playerIndex)=>{\n                        console.log(\"  Player \".concat(playerIndex + 1, \": \").concat(player.name));\n                    });\n                }\n            });\n            const data = {\n                id: raw.id || overview.tournamentId || \"current\",\n                name: overview.tournamentName || raw.name || \"Tournament\",\n                status: overview.status || raw.status || \"setup\",\n                currentRound: overview.currentRound || raw.currentRound || \"\",\n                teams: teams,\n                rounds: (Array.isArray(roundsData) ? roundsData : Object.entries(roundsData).filter((param)=>{\n                    let [, round] = param;\n                    return round && typeof round === \"object\";\n                }).sort((param, param1)=>{\n                    let [keyA] = param, [keyB] = param1;\n                    // Sort rounds in a consistent order: semiFinal1, semiFinal2, final\n                    const order = {\n                        semiFinal1: 1,\n                        semiFinal2: 2,\n                        final: 3\n                    };\n                    return (order[keyA] || 999) - (order[keyB] || 999);\n                }).map((param)=>{\n                    let [, round] = param;\n                    return round;\n                })).map((round)=>({\n                        ...round,\n                        team1Wins: round.team1Wins || 0,\n                        team2Wins: round.team2Wins || 0,\n                        winsNeeded: round.winsNeeded || 5\n                    })),\n                streamingMode: raw.streamingMode || \"normal\",\n                lastWebUpdate: toSafeDate(raw.lastWebUpdate),\n                pushedAt: toSafeDate(raw.pushedAt),\n                pushedBy: raw.pushedBy || \"\"\n            };\n            callback(data);\n        } else {\n            callback(null);\n        }\n    }, (error)=>{\n        console.error(\"Error listening to streaming data:\", error);\n        callback(null);\n    });\n};\n// Get current streaming data (one-time read)\nconst getCurrentStreamingData = async ()=>{\n    try {\n        const streamingRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(db, \"streaming\", \"avryzcqeibphtefihmsrjfbugeq1\");\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(streamingRef);\n        if (docSnap.exists()) {\n            const raw = docSnap.data();\n            // Handle mobile app's data structure\n            const overview = raw.overview || {};\n            const roundsData = raw.rounds || {};\n            const data = {\n                id: raw.id || overview.tournamentId || \"current\",\n                name: overview.tournamentName || raw.name || \"Tournament\",\n                status: overview.status || raw.status || \"setup\",\n                currentRound: overview.currentRound || raw.currentRound || \"\",\n                teams: Array.isArray(raw.teams) ? raw.teams : [],\n                rounds: (Array.isArray(roundsData) ? roundsData : Object.entries(roundsData).filter((param)=>{\n                    let [, round] = param;\n                    return round && typeof round === \"object\";\n                }).sort((param, param1)=>{\n                    let [keyA] = param, [keyB] = param1;\n                    // Sort rounds in a consistent order: semiFinal1, semiFinal2, final\n                    const order = {\n                        semiFinal1: 1,\n                        semiFinal2: 2,\n                        final: 3\n                    };\n                    return (order[keyA] || 999) - (order[keyB] || 999);\n                }).map((param)=>{\n                    let [, round] = param;\n                    return round;\n                })).map((round)=>({\n                        ...round,\n                        team1Wins: round.team1Wins || 0,\n                        team2Wins: round.team2Wins || 0,\n                        winsNeeded: round.winsNeeded || 5\n                    })),\n                streamingMode: raw.streamingMode || \"normal\",\n                lastWebUpdate: toSafeDate(raw.lastWebUpdate),\n                pushedAt: toSafeDate(raw.pushedAt),\n                pushedBy: raw.pushedBy || \"\"\n            };\n            return data;\n        }\n        return null;\n    } catch (error) {\n        console.error(\"Error getting current streaming data:\", error);\n        return null;\n    }\n};\n// Listen to the stream control document in real-time\nconst listenToStreamControl = (callback)=>{\n    const streamControlRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(db, \"streaming\", \"current_stream_control\");\n    console.log(\"FIREBASE: Listening to stream control document...\");\n    return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.onSnapshot)(streamControlRef, (doc)=>{\n        if (doc.exists()) {\n            console.log(\"FIREBASE: Stream control data received:\", doc.data());\n            callback(doc.data());\n        } else {\n            console.log(\"FIREBASE: Stream control document does not exist, providing default.\");\n            // If the document doesn't exist, provide a default state\n            callback({\n                streamMatches: [],\n                hiddenSections: []\n            });\n        }\n    }, (error)=>{\n        console.error(\"FIREBASE: Error listening to stream control:\", error);\n        // Provide a default state on error as well\n        callback({\n            streamMatches: [],\n            hiddenSections: []\n        });\n    });\n};\n// Update the stream control document\nconst updateStreamControl = async (data)=>{\n    try {\n        const streamControlRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(db, \"streaming\", \"current_stream_control\");\n        console.log(\"FIREBASE: Updating stream control with data:\", data);\n        // Use setDoc with merge: true to create the doc if it doesn't exist or update it if it does\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(streamControlRef, data, {\n            merge: true\n        });\n        console.log(\"FIREBASE: Stream control update successful.\");\n    } catch (error) {\n        console.error(\"FIREBASE: Error updating stream control:\", error);\n    }\n};\n// Explore existing Firebase data\nconst exploreFirebaseData = async ()=>{\n    try {\n        console.log(\"🔍 Exploring Firebase data...\");\n        console.log(\"⚠️ Note: Some collections may require authentication\");\n        // Try to check streaming collection first (most likely to be accessible)\n        try {\n            const streamingRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(db, \"streaming\", \"avryzcqeibphtefihmsrjfbugeq1\");\n            const streamingDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(streamingRef);\n            if (streamingDoc.exists()) {\n                console.log(\"✅ 📡 Streaming data found:\", streamingDoc.data());\n            } else {\n                console.log(\"📡 No streaming data found (collection exists but empty)\");\n            }\n        } catch (error) {\n            const firebaseError = error;\n            if (firebaseError.code === \"permission-denied\") {\n                console.log(\"❌ 📡 Streaming collection: Permission denied (needs authentication)\");\n            } else {\n                console.log(\"❌ 📡 Streaming collection error:\", firebaseError.message);\n            }\n        }\n        // Try to check users collection\n        try {\n            const usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(db, \"users\");\n            const usersSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(usersRef);\n            console.log(\"✅ 👥 Users found:\", usersSnapshot.docs.length);\n            usersSnapshot.docs.forEach((doc)=>{\n                console.log(\"  - User \".concat(doc.id, \":\"), doc.data());\n            });\n        } catch (error) {\n            const firebaseError = error;\n            if (firebaseError.code === \"permission-denied\") {\n                console.log(\"❌ 👥 Users collection: Permission denied (needs authentication)\");\n            } else {\n                console.log(\"❌ 👥 Users collection error:\", firebaseError.message);\n            }\n        }\n        // Try to check for any other common collections\n        const commonCollections = [\n            \"tournaments\",\n            \"matches\",\n            \"teams\",\n            \"players\"\n        ];\n        for (const collectionName of commonCollections){\n            try {\n                const collectionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(db, collectionName);\n                const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(collectionRef);\n                console.log(\"✅ \\uD83D\\uDCC1 \".concat(collectionName, \" collection: \").concat(snapshot.docs.length, \" documents\"));\n                if (snapshot.docs.length > 0) {\n                    snapshot.docs.slice(0, 2).forEach((doc)=>{\n                        console.log(\"  - \".concat(collectionName, \" \").concat(doc.id, \":\"), doc.data());\n                    });\n                }\n            } catch (error) {\n                const firebaseError = error;\n                if (firebaseError.code === \"permission-denied\") {\n                    console.log(\"❌ \\uD83D\\uDCC1 \".concat(collectionName, \" collection: Permission denied\"));\n                } else {\n                    console.log(\"❌ \\uD83D\\uDCC1 \".concat(collectionName, \" collection error:\"), firebaseError.message);\n                }\n            }\n        }\n        console.log(\"🔍 Exploration complete!\");\n        return true;\n    } catch (error) {\n        console.error(\"❌ Error exploring Firebase:\", error);\n        return false;\n    }\n};\n// ===== AUTHENTICATION FUNCTIONS =====\n// Email validation helper\nconst validateEmail = (email)=>{\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n};\n// Password validation helper\nconst validatePassword = (password)=>{\n    // Strong password: min 8 chars, uppercase, lowercase, number, special char\n    const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/;\n    return passwordRegex.test(password);\n};\n// Create user with email verification\nconst createUserWithEmailVerification = async (email, password, displayName)=>{\n    try {\n        // Validate inputs\n        if (!validateEmail(email)) {\n            throw new Error(\"Invalid email format\");\n        }\n        if (!validatePassword(password)) {\n            throw new Error(\"Password must be at least 8 characters with uppercase, lowercase, number, and special character\");\n        }\n        if (!displayName || displayName.trim().length < 2) {\n            throw new Error(\"Name must be at least 2 characters\");\n        }\n        // Create user account\n        const userCredential = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.createUserWithEmailAndPassword)(auth, email, password);\n        // Send email verification\n        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.sendEmailVerification)(userCredential.user);\n        // Create user profile in Firestore\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(db, \"users\", userCredential.user.uid), {\n            displayName: displayName.trim(),\n            email,\n            emailVerified: false,\n            createdAt: new Date(),\n            isAdmin: false\n        });\n        return {\n            user: userCredential.user,\n            needsVerification: true,\n            message: \"Account created! Please check your email to verify your account.\"\n        };\n    } catch (error) {\n        const message = error instanceof Error ? error.message : \"Failed to create account\";\n        throw new Error(message);\n    }\n};\n// Sign in user\nconst signInUser = async (email, password)=>{\n    try {\n        const userCredential = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.signInWithEmailAndPassword)(auth, email, password);\n        // Check if email is verified\n        if (!userCredential.user.emailVerified) {\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.signOut)(auth);\n            throw new Error(\"Please verify your email before signing in. Check your inbox for the verification link.\");\n        }\n        return userCredential.user;\n    } catch (error) {\n        const message = error instanceof Error ? error.message : \"Failed to sign in\";\n        throw new Error(message);\n    }\n};\n// Sign out user\nconst signOutUser = async ()=>{\n    try {\n        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.signOut)(auth);\n    } catch (error) {\n        const message = error instanceof Error ? error.message : \"Failed to sign out\";\n        throw new Error(message);\n    }\n};\n// Resend email verification\nconst resendEmailVerification = async ()=>{\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new Error(\"No user logged in\");\n        }\n        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.sendEmailVerification)(user);\n        return \"Verification email sent! Please check your inbox.\";\n    } catch (error) {\n        const message = error instanceof Error ? error.message : \"Failed to send verification email\";\n        throw new Error(message);\n    }\n};\n// Delete user account\nconst deleteUserAccount = async (password)=>{\n    try {\n        const user = auth.currentUser;\n        if (!user || !user.email) {\n            throw new Error(\"No user logged in\");\n        }\n        // Re-authenticate user before deletion\n        const credential = firebase_auth__WEBPACK_IMPORTED_MODULE_2__.EmailAuthProvider.credential(user.email, password);\n        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.reauthenticateWithCredential)(user, credential);\n        // Delete user data from Firestore\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(db, \"users\", user.uid));\n        // Delete user account\n        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.deleteUser)(user);\n        return \"Account deleted successfully\";\n    } catch (error) {\n        const firebaseError = error;\n        const message = firebaseError.message || \"Failed to delete account\";\n        throw new Error(message);\n    }\n};\n// Get current user\nconst getCurrentUser = ()=>{\n    return auth.currentUser;\n};\n// Check if user is authenticated\nconst isUserAuthenticated = ()=>{\n    return !!auth.currentUser;\n};\n// Check if user email is verified\nconst isEmailVerified = ()=>{\n    var _auth_currentUser;\n    return ((_auth_currentUser = auth.currentUser) === null || _auth_currentUser === void 0 ? void 0 : _auth_currentUser.emailVerified) || false;\n};\n// Send password reset email\nconst sendPasswordReset = async (email)=>{\n    try {\n        // Validate email format\n        if (!validateEmail(email)) {\n            throw new Error(\"Invalid email format\");\n        }\n        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.sendPasswordResetEmail)(auth, email);\n        return \"Password reset email sent! Please check your inbox and follow the instructions.\";\n    } catch (error) {\n        const firebaseError = error;\n        // Handle specific Firebase errors\n        if (firebaseError.code === \"auth/user-not-found\") {\n            throw new Error(\"No account found with this email address\");\n        } else if (firebaseError.code === \"auth/invalid-email\") {\n            throw new Error(\"Invalid email address\");\n        } else if (firebaseError.code === \"auth/too-many-requests\") {\n            throw new Error(\"Too many password reset attempts. Please try again later.\");\n        }\n        throw new Error(firebaseError.message || \"Failed to send password reset email\");\n    }\n};\n// Update password (for logged-in users)\nconst updateUserPassword = async (currentPassword, newPassword)=>{\n    try {\n        const user = auth.currentUser;\n        if (!user || !user.email) {\n            throw new Error(\"No user logged in\");\n        }\n        // Validate new password\n        if (!validatePassword(newPassword)) {\n            throw new Error(\"New password must be at least 8 characters with uppercase, lowercase, number, and special character\");\n        }\n        // Re-authenticate user\n        const credential = firebase_auth__WEBPACK_IMPORTED_MODULE_2__.EmailAuthProvider.credential(user.email, currentPassword);\n        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.reauthenticateWithCredential)(user, credential);\n        // Update password\n        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.updatePassword)(user, newPassword);\n        return \"Password updated successfully\";\n    } catch (error) {\n        const firebaseError = error;\n        if (firebaseError.code === \"auth/wrong-password\") {\n            throw new Error(\"Current password is incorrect\");\n        } else if (firebaseError.code === \"auth/weak-password\") {\n            throw new Error(\"New password is too weak\");\n        }\n        throw new Error(firebaseError.message || \"Failed to update password\");\n    }\n};\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zZXJ2aWNlcy9maXJlYmFzZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFXakI7QUFZTDtBQUlZO0FBT25DLDZDQUE2QztBQUM3Q29CLCtFQUFzQkE7QUFFdEIsc0JBQXNCO0FBQ3RCLE1BQU1DLE1BQU1yQiwyREFBYUEsQ0FBQ21CLG1FQUFjQTtBQUN4QyxNQUFNRyxLQUFLckIsZ0VBQVlBLENBQUNvQjtBQUN4QixNQUFNRSxPQUFPZCxzREFBT0EsQ0FBQ1k7QUEyRnJCLDZEQUE2RDtBQUM3RCxNQUFNRyxhQUFhLENBQUNDO0lBQ2xCLElBQUksQ0FBQ0EsT0FBTyxPQUFPLElBQUlDLEtBQUs7SUFDNUIsSUFBSUQsaUJBQWlCQyxNQUFNLE9BQU9EO0lBQ2xDLElBQUksT0FBT0EsVUFBVSxZQUFZLE9BQU9BLFVBQVUsVUFBVTtRQUMxRCxNQUFNRSxJQUFJLElBQUlELEtBQUtEO1FBQ25CLE9BQU9HLE1BQU1ELEVBQUVFLE9BQU8sTUFBTSxJQUFJSCxLQUFLLEtBQUtDO0lBQzVDO0lBQ0EsSUFBSSxPQUFPRixVQUFVLFlBQVlBLFVBQVUsUUFBUSxZQUFZQSxPQUFPO1FBQ3BFLE9BQU8sTUFBOEJLLE1BQU07SUFDN0M7SUFDQSxNQUFNSCxJQUFJLElBQUlELEtBQUtEO0lBQ25CLE9BQU9HLE1BQU1ELEVBQUVFLE9BQU8sTUFBTSxJQUFJSCxLQUFLLEtBQUtDO0FBQzVDO0FBU0Esd0NBQXdDO0FBQ2pDLE1BQU1JLHdCQUF3QixDQUNuQ0M7SUFFQUMsUUFBUUMsR0FBRyxDQUNUO0lBRUYsTUFBTUMsZUFBZWpDLHVEQUFHQSxDQUFDb0IsSUFBSSxhQUFhO0lBRTFDLE9BQU9uQiw4REFBVUEsQ0FDZmdDLGNBQ0EsQ0FBQ2pDO1FBQ0MrQixRQUFRQyxHQUFHLENBQ1Qsa0NBQ0FoQyxJQUFJa0MsTUFBTSxLQUFLLG9CQUFvQjtRQUVyQyxJQUFJbEMsSUFBSWtDLE1BQU0sSUFBSTtZQUNo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Y0MsSUFBSSxLQUFLLHNCQUFzQjtZQUN0RCxNQUFNLElBQUltQixNQUFNO1FBQ2xCLE9BQU8sSUFBSXBCLGNBQWNDLElBQUksS0FBSywwQkFBMEI7WUFDMUQsTUFBTSxJQUFJbUIsTUFDUjtRQUVKO1FBQ0EsTUFBTSxJQUFJQSxNQUNScEIsY0FBY0UsT0FBTyxJQUFJO0lBRTdCO0FBQ0YsRUFBRTtBQUVGLHdDQUF3QztBQUNqQyxNQUFNb0MscUJBQXFCLE9BQ2hDQyxpQkFDQUM7SUFFQSxJQUFJO1FBQ0YsTUFBTWxCLE9BQU94SCxLQUFLaUksV0FBVztRQUM3QixJQUFJLENBQUNULFFBQVEsQ0FBQ0EsS0FBS1YsS0FBSyxFQUFFO1lBQ3hCLE1BQU0sSUFBSVEsTUFBTTtRQUNsQjtRQUVBLHdCQUF3QjtRQUN4QixJQUFJLENBQUNMLGlCQUFpQnlCLGNBQWM7WUFDbEMsTUFBTSxJQUFJcEIsTUFDUjtRQUVKO1FBRUEsdUJBQXVCO1FBQ3ZCLE1BQU1hLGFBQWF4SSw0REFBaUJBLENBQUN3SSxVQUFVLENBQzdDWCxLQUFLVixLQUFLLEVBQ1YyQjtRQUVGLE1BQU0vSSwyRUFBNEJBLENBQUM4SCxNQUFNVztRQUV6QyxrQkFBa0I7UUFDbEIsTUFBTTFJLDZEQUFjQSxDQUFDK0gsTUFBTWtCO1FBRTNCLE9BQU87SUFDVCxFQUFFLE9BQU9uRCxPQUFPO1FBQ2QsTUFBTVcsZ0JBQWdCWDtRQUN0QixJQUFJVyxjQUFjQyxJQUFJLEtBQUssdUJBQXVCO1lBQ2hELE1BQU0sSUFBSW1CLE1BQU07UUFDbEIsT0FBTyxJQUFJcEIsY0FBY0MsSUFBSSxLQUFLLHNCQUFzQjtZQUN0RCxNQUFNLElBQUltQixNQUFNO1FBQ2xCO1FBQ0EsTUFBTSxJQUFJQSxNQUFNcEIsY0FBY0UsT0FBTyxJQUFJO0lBQzNDO0FBQ0YsRUFBRTtBQUVrQiIsInNvdXJjZXMiOlsiL1VzZXJzL2Rhdmlkb25xdWl0L0xvY2FsRGV2L093ZW5zQ3VwL3NlZ3VuZG8vc3JjL3NlcnZpY2VzL2ZpcmViYXNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tIFwiZmlyZWJhc2UvYXBwXCI7XG5pbXBvcnQge1xuICBnZXRGaXJlc3RvcmUsXG4gIGRvYyxcbiAgb25TbmFwc2hvdCxcbiAgZ2V0RG9jLFxuICBjb2xsZWN0aW9uLFxuICBnZXREb2NzLFxuICBEb2N1bWVudERhdGEsXG4gIHNldERvYyxcbiAgZGVsZXRlRG9jLFxufSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5pbXBvcnQge1xuICBnZXRBdXRoLFxuICBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQsXG4gIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLFxuICBzaWduT3V0LFxuICBzZW5kRW1haWxWZXJpZmljYXRpb24sXG4gIHNlbmRQYXNzd29yZFJlc2V0RW1haWwsXG4gIGRlbGV0ZVVzZXIsXG4gIHVwZGF0ZVBhc3N3b3JkLFxuICByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsLFxuICBFbWFpbEF1dGhQcm92aWRlcixcbn0gZnJvbSBcImZpcmViYXNlL2F1dGhcIjtcbmltcG9ydCB7XG4gIGZpcmViYXNlQ29uZmlnLFxuICB2YWxpZGF0ZUZpcmViYXNlQ29uZmlnLFxufSBmcm9tIFwiLi4vY29uZmlnL2ZpcmViYXNlLmNvbmZpZ1wiO1xuXG4vLyBUeXBlIGZvciBGaXJlYmFzZSBlcnJvcnNcbmludGVyZmFjZSBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb2RlPzogc3RyaW5nO1xufVxuXG4vLyBWYWxpZGF0ZSBGaXJlYmFzZSBjb25maWd1cmF0aW9uIG9uIHN0YXJ0dXBcbnZhbGlkYXRlRmlyZWJhc2VDb25maWcoKTtcblxuLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZVxuY29uc3QgYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XG5jb25zdCBkYiA9IGdldEZpcmVzdG9yZShhcHApO1xuY29uc3QgYXV0aCA9IGdldEF1dGgoYXBwKTtcblxuLy8gRmlyZXN0b3JlIGRvY3VtZW50IGRhdGEgaW50ZXJmYWNlXG5pbnRlcmZhY2UgRmlyZXN0b3JlRG9jdW1lbnREYXRhIGV4dGVuZHMgRG9jdW1lbnREYXRhIHtcbiAgaWQ/OiBzdHJpbmc7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIHN0YXR1cz86IHN0cmluZztcbiAgY3VycmVudFJvdW5kPzogc3RyaW5nO1xuICB0ZWFtcz86IFdlYlRlYW1bXTtcbiAgcm91bmRzPzogV2ViUm91bmRbXTtcbiAgc3RyZWFtaW5nTW9kZT86IHN0cmluZztcbiAgbGFzdFdlYlVwZGF0ZT86IEZpcmVzdG9yZVRpbWVzdGFtcDtcbiAgcHVzaGVkQXQ/OiBGaXJlc3RvcmVUaW1lc3RhbXA7XG4gIHB1c2hlZEJ5Pzogc3RyaW5nO1xufVxuXG4vLyBGaXJlc3RvcmUgVGltZXN0YW1wIGludGVyZmFjZVxuaW50ZXJmYWNlIEZpcmVzdG9yZVRpbWVzdGFtcCB7XG4gIHRvRGF0ZSgpOiBEYXRlO1xufVxuXG4vLyBUeXBlcyBmb3Igc3RyZWFtaW5nIGRhdGEgKG1hdGNoaW5nIG1vYmlsZSBhcHApXG5leHBvcnQgaW50ZXJmYWNlIFdlYlBsYXllciB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgY2FwdGFpbjogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWJUZWFtIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBtYW5hZ2VyOiBzdHJpbmc7XG4gIGNhcHRhaW46IHN0cmluZztcbiAgcGxheWVyczogV2ViUGxheWVyW107XG4gIGNvbG9yOiBzdHJpbmc7XG4gIGljb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWJNYXRjaCB7XG4gIG1hdGNoSWQ6IHN0cmluZztcbiAgcm91bmROYW1lOiBzdHJpbmc7XG4gIG1hdGNoTnVtYmVyOiBudW1iZXI7XG4gIHRlYW0xOiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgc2NvcmU6IG51bWJlcjtcbiAgICBjb2xvcjogc3RyaW5nO1xuICAgIGljb246IHN0cmluZztcbiAgfTtcbiAgdGVhbTI6IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBzY29yZTogbnVtYmVyO1xuICAgIGNvbG9yOiBzdHJpbmc7XG4gICAgaWNvbjogc3RyaW5nO1xuICB9O1xuICBpc0NvbXBsZXRlZDogYm9vbGVhbjtcbiAgd2lubmVySWQ6IHN0cmluZyB8IG51bGw7XG4gIHJhY2VUb1Njb3JlOiBudW1iZXI7XG4gIGxhc3RVcGRhdGVkOiBEYXRlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdlYlJvdW5kIHtcbiAgcm91bmROYW1lOiBzdHJpbmc7XG4gIGlzQ29tcGxldGVkOiBib29sZWFuO1xuICB3aW5uZXJUZWFtSWQ6IHN0cmluZyB8IG51bGw7XG4gIG1hdGNoZXM6IFdlYk1hdGNoW107XG4gIHRlYW0xV2luczogbnVtYmVyO1xuICB0ZWFtMldpbnM6IG51bWJlcjtcbiAgd2luc05lZWRlZDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdlYlRvdXJuYW1lbnREYXRhIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBzdGF0dXM6IFwic2V0dXBcIiB8IFwibGl2ZVwiIHwgXCJjb21wbGV0ZWRcIjtcbiAgY3VycmVudFJvdW5kOiBzdHJpbmc7XG4gIHRlYW1zOiBXZWJUZWFtW107XG4gIHJvdW5kczogV2ViUm91bmRbXTtcbiAgc3RyZWFtaW5nTW9kZTogXCJub3JtYWxcIiB8IFwic3RyZWFtaW5nXCIgfCBcIm1hbnVhbFwiO1xuICBsYXN0V2ViVXBkYXRlOiBEYXRlIHwgbnVsbDtcbiAgcHVzaGVkQXQ6IERhdGUgfCBudWxsO1xuICBwdXNoZWRCeTogc3RyaW5nO1xufVxuXG4vLyBUeXBlcyBmb3IgdGhlIG5ldyBTdHJlYW0gQ29udHJvbCBkb2N1bWVudFxuZXhwb3J0IGludGVyZmFjZSBTdHJlYW1Db250cm9sRGF0YSB7XG4gIHN0cmVhbU1hdGNoZXM6IHN0cmluZ1tdO1xuICBoaWRkZW5TZWN0aW9uczogc3RyaW5nW107XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBzYWZlbHkgY29udmVydCBGaXJlc3RvcmUgdmFsdWVzIHRvIERhdGVcbmNvbnN0IHRvU2FmZURhdGUgPSAodmFsdWU6IHVua25vd24pOiBEYXRlID0+IHtcbiAgaWYgKCF2YWx1ZSkgcmV0dXJuIG5ldyBEYXRlKDApO1xuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gdmFsdWU7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XG4gICAgY29uc3QgZCA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICByZXR1cm4gaXNOYU4oZC5nZXRUaW1lKCkpID8gbmV3IERhdGUoMCkgOiBkO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwgJiYgXCJ0b0RhdGVcIiBpbiB2YWx1ZSkge1xuICAgIHJldHVybiAodmFsdWUgYXMgRmlyZXN0b3JlVGltZXN0YW1wKS50b0RhdGUoKTtcbiAgfVxuICBjb25zdCBkID0gbmV3IERhdGUodmFsdWUgYXMgc3RyaW5nIHwgbnVtYmVyIHwgRGF0ZSk7XG4gIHJldHVybiBpc05hTihkLmdldFRpbWUoKSkgPyBuZXcgRGF0ZSgwKSA6IGQ7XG59O1xuXG4vLyBUeXBlIGZvciB0aGUgbmVzdGVkIHJvdW5kcyBvYmplY3RcbnR5cGUgUm91bmRzRGF0YSA9XG4gIHwge1xuICAgICAgW2tleTogc3RyaW5nXTogUGFydGlhbDxXZWJSb3VuZD47XG4gICAgfVxuICB8IFdlYlJvdW5kW107XG5cbi8vIExpc3RlbiB0byBzdHJlYW1pbmcgZGF0YSBpbiByZWFsLXRpbWVcbmV4cG9ydCBjb25zdCBsaXN0ZW5Ub1N0cmVhbWluZ0RhdGEgPSAoXG4gIGNhbGxiYWNrOiAoZGF0YTogV2ViVG91cm5hbWVudERhdGEgfCBudWxsKSA9PiB2b2lkXG4pID0+IHtcbiAgY29uc29sZS5sb2coXG4gICAgXCLwn5SNIFNlZ3VuZG8gbGlzdGVuaW5nIHRvOiBzdHJlYW1pbmcvYXZyeXpjcWVpYnBodGVmaWhtc3JqZmJ1Z2VxMVwiXG4gICk7XG4gIGNvbnN0IHN0cmVhbWluZ1JlZiA9IGRvYyhkYiwgXCJzdHJlYW1pbmdcIiwgXCJhdnJ5emNxZWlicGh0ZWZpaG1zcmpmYnVnZXExXCIpO1xuXG4gIHJldHVybiBvblNuYXBzaG90KFxuICAgIHN0cmVhbWluZ1JlZixcbiAgICAoZG9jKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCLwn5SNIEZpcmViYXNlIHNuYXBzaG90IHJlY2VpdmVkOlwiLFxuICAgICAgICBkb2MuZXhpc3RzKCkgPyBcIkRvY3VtZW50IGV4aXN0c1wiIDogXCJEb2N1bWVudCBkb2VzIG5vdCBleGlzdFwiXG4gICAgICApO1xuICAgICAgaWYgKGRvYy5leGlzdHMoKSkge1xuICAgICAgICBjb25zdCByYXcgPSBkb2MuZGF0YSgpIGFzIEZpcmVzdG9yZURvY3VtZW50RGF0YTtcblxuICAgICAgICAvLyBIYW5kbGUgbW9iaWxlIGFwcCdzIGRhdGEgc3RydWN0dXJlXG4gICAgICAgIGNvbnN0IG92ZXJ2aWV3ID0gKHJhdy5vdmVydmlldyB8fCB7fSkgYXMgRG9jdW1lbnREYXRhO1xuICAgICAgICBjb25zdCByb3VuZHNEYXRhOiBSb3VuZHNEYXRhID0gKHJhdy5yb3VuZHMgfHwge30pIGFzIFJvdW5kc0RhdGE7XG5cbiAgICAgICAgLy8gRGVidWc6IExvZyB0aGUgcmF3IGRhdGEgc3RydWN0dXJlXG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+UjSBSYXcgRmlyZWJhc2UgZGF0YTpcIiwgcmF3KTtcbiAgICAgICAgY29uc29sZS5sb2coXCLwn5SNIE92ZXJ2aWV3IGRhdGE6XCIsIG92ZXJ2aWV3KTtcbiAgICAgICAgY29uc29sZS5sb2coXCLwn5SNIFJhdyB0ZWFtczpcIiwgcmF3LnRlYW1zKTtcbiAgICAgICAgY29uc29sZS5sb2coXCLwn5SNIE92ZXJ2aWV3IHRlYW1zOlwiLCBvdmVydmlldy50ZWFtcyk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+UjSBSb3VuZHMgZGF0YTpcIiwgcm91bmRzRGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+UjSBDaGFtcGlvbiBkYXRhOlwiLCByYXcuY2hhbXBpb24pO1xuXG4gICAgICAgIC8vIENoZWNrIGZvciBvdGhlciBwb3NzaWJsZSB0ZWFtIGRhdGEgbG9jYXRpb25zXG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+UjSBBbGwgcmF3IGRhdGEga2V5czpcIiwgT2JqZWN0LmtleXMocmF3KSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+UjSBBbGwgb3ZlcnZpZXcga2V5czpcIiwgT2JqZWN0LmtleXMob3ZlcnZpZXcpKTtcblxuICAgICAgICAvLyBMb29rIGZvciB0ZWFtcyBpbiBvdGhlciBwb3NzaWJsZSBsb2NhdGlvbnNcbiAgICAgICAgaWYgKHJhdy50ZWFtc0RhdGEpIGNvbnNvbGUubG9nKFwi8J+UjSB0ZWFtc0RhdGE6XCIsIHJhdy50ZWFtc0RhdGEpO1xuICAgICAgICBpZiAocmF3LnRlYW1MaXN0KSBjb25zb2xlLmxvZyhcIvCflI0gdGVhbUxpc3Q6XCIsIHJhdy50ZWFtTGlzdCk7XG4gICAgICAgIGlmIChyYXcucGFydGljaXBhbnRzKSBjb25zb2xlLmxvZyhcIvCflI0gcGFydGljaXBhbnRzOlwiLCByYXcucGFydGljaXBhbnRzKTtcbiAgICAgICAgaWYgKG92ZXJ2aWV3LnRlYW1zRGF0YSlcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIvCflI0gb3ZlcnZpZXcudGVhbXNEYXRhOlwiLCBvdmVydmlldy50ZWFtc0RhdGEpO1xuICAgICAgICBpZiAob3ZlcnZpZXcudGVhbUxpc3QpXG4gICAgICAgICAgY29uc29sZS5sb2coXCLwn5SNIG92ZXJ2aWV3LnRlYW1MaXN0OlwiLCBvdmVydmlldy50ZWFtTGlzdCk7XG4gICAgICAgIGlmIChvdmVydmlldy5wYXJ0aWNpcGFudHMpXG4gICAgICAgICAgY29uc29sZS5sb2coXCLwn5SNIG92ZXJ2aWV3LnBhcnRpY2lwYW50czpcIiwgb3ZlcnZpZXcucGFydGljaXBhbnRzKTtcblxuICAgICAgICAvLyBEZWJ1ZzogTG9nIGRldGFpbGVkIHJvdW5kcyBzdHJ1Y3R1cmVcbiAgICAgICAgT2JqZWN0LmVudHJpZXMocm91bmRzRGF0YSkuZm9yRWFjaCgoW3JvdW5kS2V5LCByb3VuZERhdGFdKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coYPCflI0gUm91bmQgJHtyb3VuZEtleX06YCwgcm91bmREYXRhKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICByb3VuZERhdGEgJiZcbiAgICAgICAgICAgIHR5cGVvZiByb3VuZERhdGEgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIHJvdW5kRGF0YSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgXCJtYXRjaGVzXCIgaW4gcm91bmREYXRhICYmXG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KHJvdW5kRGF0YS5tYXRjaGVzKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3Qgcm91bmQgPSByb3VuZERhdGEgYXMgeyBtYXRjaGVzOiBXZWJNYXRjaFtdIH07XG4gICAgICAgICAgICByb3VuZC5tYXRjaGVzLmZvckVhY2goKG1hdGNoOiBXZWJNYXRjaCwgbWF0Y2hJbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIE1hdGNoICR7bWF0Y2hJbmRleH0gaW4gJHtyb3VuZEtleX06YCwgbWF0Y2gpO1xuICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgdHlwZW9mIG1hdGNoID09PSBcIm9iamVjdFwiICYmIG1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hPYmogPSBtYXRjaCBhcyB7XG4gICAgICAgICAgICAgICAgICB0ZWFtMT86IHVua25vd247XG4gICAgICAgICAgICAgICAgICB0ZWFtMj86IHVua25vd247XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hPYmoudGVhbTEpXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBUZWFtMSBkZXRhaWxzOmAsIG1hdGNoT2JqLnRlYW0xKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hPYmoudGVhbTIpXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBUZWFtMiBkZXRhaWxzOmAsIG1hdGNoT2JqLnRlYW0yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBFeHRyYWN0IHRlYW1zIGZyb20gcm91bmRzIGRhdGEgaWYgdGVhbXMgYXJyYXkgaXMgZW1wdHlcbiAgICAgICAgbGV0IHRlYW1zOiBXZWJUZWFtW10gPSBbXTtcblxuICAgICAgICBjb25zb2xlLmxvZyhcIvCflI0gUmF3IHRlYW1zIGFycmF5OlwiLCByYXcudGVhbXMpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIvCflI0gT3ZlcnZpZXcgdGVhbXMgYXJyYXk6XCIsIG92ZXJ2aWV3LnRlYW1zKTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyYXcudGVhbXMpICYmIHJhdy50ZWFtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCLwn5SNIFVzaW5nIHJhdy50ZWFtczpcIiwgcmF3LnRlYW1zLmxlbmd0aCwgXCJ0ZWFtc1wiKTtcbiAgICAgICAgICB0ZWFtcyA9IHJhdy50ZWFtcztcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG92ZXJ2aWV3LnRlYW1zKSAmJiBvdmVydmlldy50ZWFtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBcIvCflI0gVXNpbmcgb3ZlcnZpZXcudGVhbXM6XCIsXG4gICAgICAgICAgICBvdmVydmlldy50ZWFtcy5sZW5ndGgsXG4gICAgICAgICAgICBcInRlYW1zXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHRlYW1zID0gb3ZlcnZpZXcudGVhbXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCLwn5SNIEV4dHJhY3RpbmcgdGVhbXMgZnJvbSByb3VuZHMgZGF0YS4uLlwiKTtcbiAgICAgICAgICAvLyBFeHRyYWN0IHRlYW1zIGZyb20gcm91bmRzIGRhdGFcbiAgICAgICAgICBjb25zdCB0ZWFtTWFwID0gbmV3IE1hcDxzdHJpbmcsIFdlYlRlYW0+KCk7XG5cbiAgICAgICAgICBPYmplY3QudmFsdWVzKHJvdW5kc0RhdGEpLmZvckVhY2goXG4gICAgICAgICAgICAocm91bmQ6IFBhcnRpYWw8V2ViUm91bmQ+LCByb3VuZEluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCflI0gUHJvY2Vzc2luZyByb3VuZCAke3JvdW5kSW5kZXh9OmAsIHJvdW5kKTtcbiAgICAgICAgICAgICAgaWYgKHJvdW5kICYmIHJvdW5kLm1hdGNoZXMgJiYgQXJyYXkuaXNBcnJheShyb3VuZC5tYXRjaGVzKSkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciB0ZWFtMSBhbmQgdGVhbTIgaW4gbWF0Y2hlc1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvdW5kRGF0YSA9IHJvdW5kIGFzIHsgbWF0Y2hlczogV2ViTWF0Y2hbXSB9O1xuICAgICAgICAgICAgICAgIGlmIChyb3VuZERhdGEubWF0Y2hlcyAmJiBBcnJheS5pc0FycmF5KHJvdW5kRGF0YS5tYXRjaGVzKSkge1xuICAgICAgICAgICAgICAgICAgcm91bmREYXRhLm1hdGNoZXMuZm9yRWFjaCgobWF0Y2g6IFdlYk1hdGNoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICBtYXRjaCAmJlxuICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBtYXRjaCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgIG1hdGNoICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgXCJ0ZWFtMVwiIGluIG1hdGNoICYmXG4gICAgICAgICAgICAgICAgICAgICAgXCJ0ZWFtMlwiIGluIG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoRGF0YSA9IG1hdGNoIGFzIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlYW0xPzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZD86IHN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT86IHN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyTmFtZXM/OiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVhbTI/OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkPzogc3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPzogc3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJOYW1lcz86IHN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaERhdGEudGVhbTEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoRGF0YS50ZWFtMS5pZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0xPy5uYW1lICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaERhdGEudGVhbTEubmFtZSAhPT0gXCJVbmtub3duIFRlYW1cIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0xLm5hbWUudHJpbSgpLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBg8J+UjSBGb3VuZCB0ZWFtMTogJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaERhdGEudGVhbTE/Lm5hbWUgfHwgXCJVbmtub3duXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSAoJHttYXRjaERhdGEudGVhbTEuaWR9KWBcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlYW1NYXAuaGFzKG1hdGNoRGF0YS50ZWFtMS5pZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGFyc2UgcGxheWVyTmFtZXMgc3RyaW5nIGludG8gaW5kaXZpZHVhbCBwbGF5ZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBsYXllcnM6IFdlYlBsYXllcltdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaERhdGEudGVhbTEucGxheWVyTmFtZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgbWF0Y2hEYXRhLnRlYW0xLnBsYXllck5hbWVzID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYPCflI0gVGVhbTEgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0xPy5uYW1lIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHBsYXllck5hbWVzIHN0cmluZzpgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0xLnBsYXllck5hbWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByYXdQbGF5ZXJOYW1lcyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaERhdGEudGVhbTEucGxheWVyTmFtZXMuc3BsaXQoXCIsXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYPCflI0gVGVhbTEgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0xPy5uYW1lIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHJhdyBzcGxpdDpgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3UGxheWVyTmFtZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaW1tZWRQbGF5ZXJOYW1lcyA9IHJhd1BsYXllck5hbWVzLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuYW1lOiBzdHJpbmcpID0+IG5hbWUudHJpbSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGDwn5SNIFRlYW0xICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoRGF0YS50ZWFtMT8ubmFtZSB8fCBcIlVua25vd25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBhZnRlciB0cmltOmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmltbWVkUGxheWVyTmFtZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBsYXllck5hbWVzID0gdHJpbW1lZFBsYXllck5hbWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNWYWxpZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSAmJiBuYW1lLmxlbmd0aCA+IDAgJiYgbmFtZSAhPT0gXCJQbGF5ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYPCflI0gVGVhbTEgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoRGF0YS50ZWFtMT8ubmFtZSB8fCBcIlVua25vd25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZmlsdGVyaW5nIFwiJHtuYW1lfVwiOiAke2lzVmFsaWR9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNWYWxpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYPCflI0gVGVhbTEgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0xPy5uYW1lIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHBhcnNlZCBwbGF5ZXIgbmFtZXM6YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllck5hbWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJOYW1lcy5mb3JFYWNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBsYXllck5hbWU6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBgJHttYXRjaERhdGEudGVhbTEhLmlkfV9wbGF5ZXJfJHtpbmRleH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHBsYXllck5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGFpbjogZmFsc2UsIC8vIEFsbCBwbGF5ZXJzIGFyZSByZWd1bGFyIHBsYXllcnMgZm9yIHJhbmtpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGDwn5SNIENyZWF0aW5nIHRlYW0xOiAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0xPy5uYW1lIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB3aXRoICR7cGxheWVycy5sZW5ndGh9IHBsYXllcnNgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1NYXAuc2V0KG1hdGNoRGF0YS50ZWFtMS5pZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtYXRjaERhdGEudGVhbTEuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbWF0Y2hEYXRhLnRlYW0xPy5uYW1lIHx8IFwiVW5rbm93blwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbmFnZXI6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGFpbjogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJzOiBwbGF5ZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaERhdGEudGVhbTIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoRGF0YS50ZWFtMi5pZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0yPy5uYW1lICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaERhdGEudGVhbTIubmFtZSAhPT0gXCJVbmtub3duIFRlYW1cIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0yLm5hbWUudHJpbSgpLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBg8J+UjSBGb3VuZCB0ZWFtMjogJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaERhdGEudGVhbTI/Lm5hbWUgfHwgXCJVbmtub3duXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSAoJHttYXRjaERhdGEudGVhbTIuaWR9KWBcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlYW1NYXAuaGFzKG1hdGNoRGF0YS50ZWFtMi5pZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGFyc2UgcGxheWVyTmFtZXMgc3RyaW5nIGludG8gaW5kaXZpZHVhbCBwbGF5ZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBsYXllcnM6IFdlYlBsYXllcltdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaERhdGEudGVhbTIucGxheWVyTmFtZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgbWF0Y2hEYXRhLnRlYW0yLnBsYXllck5hbWVzID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYPCflI0gVGVhbTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0yPy5uYW1lIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHBsYXllck5hbWVzIHN0cmluZzpgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0yLnBsYXllck5hbWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByYXdQbGF5ZXJOYW1lcyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaERhdGEudGVhbTIucGxheWVyTmFtZXMuc3BsaXQoXCIsXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYPCflI0gVGVhbTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0yPy5uYW1lIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHJhdyBzcGxpdDpgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3UGxheWVyTmFtZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaW1tZWRQbGF5ZXJOYW1lcyA9IHJhd1BsYXllck5hbWVzLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuYW1lOiBzdHJpbmcpID0+IG5hbWUudHJpbSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGDwn5SNIFRlYW0yICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoRGF0YS50ZWFtMj8ubmFtZSB8fCBcIlVua25vd25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBhZnRlciB0cmltOmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmltbWVkUGxheWVyTmFtZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBsYXllck5hbWVzID0gdHJpbW1lZFBsYXllck5hbWVzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNWYWxpZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSAmJiBuYW1lLmxlbmd0aCA+IDAgJiYgbmFtZSAhPT0gXCJQbGF5ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYPCflI0gVGVhbTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoRGF0YS50ZWFtMj8ubmFtZSB8fCBcIlVua25vd25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZmlsdGVyaW5nIFwiJHtuYW1lfVwiOiAke2lzVmFsaWR9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNWYWxpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYPCflI0gVGVhbTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0yPy5uYW1lIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHBhcnNlZCBwbGF5ZXIgbmFtZXM6YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllck5hbWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJOYW1lcy5mb3JFYWNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBsYXllck5hbWU6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBgJHttYXRjaERhdGEudGVhbTIhLmlkfV9wbGF5ZXJfJHtpbmRleH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHBsYXllck5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGFpbjogZmFsc2UsIC8vIEFsbCBwbGF5ZXJzIGFyZSByZWd1bGFyIHBsYXllcnMgZm9yIHJhbmtpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGDwn5SNIENyZWF0aW5nIHRlYW0yOiAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hEYXRhLnRlYW0yPy5uYW1lIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB3aXRoICR7cGxheWVycy5sZW5ndGh9IHBsYXllcnNgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1NYXAuc2V0KG1hdGNoRGF0YS50ZWFtMi5pZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtYXRjaERhdGEudGVhbTIuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbWF0Y2hEYXRhLnRlYW0yPy5uYW1lIHx8IFwiVW5rbm93blwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbmFnZXI6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGFpbjogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJzOiBwbGF5ZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHRlYW1zID0gQXJyYXkuZnJvbSh0ZWFtTWFwLnZhbHVlcygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlYnVnOiBMb2cgdGVhbSBhbmQgcGxheWVyIGNvdW50c1xuICAgICAgICBjb25zb2xlLmxvZyhcIvCflI0gVG90YWwgdGVhbXMgZXh0cmFjdGVkOlwiLCB0ZWFtcy5sZW5ndGgpO1xuICAgICAgICB0ZWFtcy5mb3JFYWNoKCh0ZWFtLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYPCflI0gVGVhbSAke2luZGV4ICsgMX0gKCR7dGVhbS5uYW1lfSk6ICR7XG4gICAgICAgICAgICAgIHRlYW0ucGxheWVycz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgICAgIH0gcGxheWVyc2BcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmICh0ZWFtLnBsYXllcnMpIHtcbiAgICAgICAgICAgIHRlYW0ucGxheWVycy5mb3JFYWNoKChwbGF5ZXIsIHBsYXllckluZGV4KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIFBsYXllciAke3BsYXllckluZGV4ICsgMX06ICR7cGxheWVyLm5hbWV9YCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGRhdGE6IFdlYlRvdXJuYW1lbnREYXRhID0ge1xuICAgICAgICAgIGlkOiByYXcuaWQgfHwgb3ZlcnZpZXcudG91cm5hbWVudElkIHx8IFwiY3VycmVudFwiLFxuICAgICAgICAgIG5hbWU6IG92ZXJ2aWV3LnRvdXJuYW1lbnROYW1lIHx8IHJhdy5uYW1lIHx8IFwiVG91cm5hbWVudFwiLFxuICAgICAgICAgIHN0YXR1czpcbiAgICAgICAgICAgIG92ZXJ2aWV3LnN0YXR1cyB8fFxuICAgICAgICAgICAgKHJhdy5zdGF0dXMgYXMgXCJzZXR1cFwiIHwgXCJsaXZlXCIgfCBcImNvbXBsZXRlZFwiKSB8fFxuICAgICAgICAgICAgXCJzZXR1cFwiLFxuICAgICAgICAgIGN1cnJlbnRSb3VuZDogb3ZlcnZpZXcuY3VycmVudFJvdW5kIHx8IHJhdy5jdXJyZW50Um91bmQgfHwgXCJcIixcbiAgICAgICAgICB0ZWFtczogdGVhbXMsXG4gICAgICAgICAgcm91bmRzOiAoQXJyYXkuaXNBcnJheShyb3VuZHNEYXRhKVxuICAgICAgICAgICAgPyByb3VuZHNEYXRhXG4gICAgICAgICAgICA6IE9iamVjdC5lbnRyaWVzKHJvdW5kc0RhdGEpXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoWywgcm91bmRdKSA9PiByb3VuZCAmJiB0eXBlb2Ygcm91bmQgPT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgLnNvcnQoKFtrZXlBXSwgW2tleUJdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAvLyBTb3J0IHJvdW5kcyBpbiBhIGNvbnNpc3RlbnQgb3JkZXI6IHNlbWlGaW5hbDEsIHNlbWlGaW5hbDIsIGZpbmFsXG4gICAgICAgICAgICAgICAgICBjb25zdCBvcmRlcjogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc2VtaUZpbmFsMTogMSxcbiAgICAgICAgICAgICAgICAgICAgc2VtaUZpbmFsMjogMixcbiAgICAgICAgICAgICAgICAgICAgZmluYWw6IDMsXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChvcmRlcltrZXlBXSB8fCA5OTkpIC0gKG9yZGVyW2tleUJdIHx8IDk5OSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAubWFwKChbLCByb3VuZF0pID0+IHJvdW5kKVxuICAgICAgICAgICkubWFwKChyb3VuZCkgPT4gKHtcbiAgICAgICAgICAgIC4uLihyb3VuZCBhcyBXZWJSb3VuZCksXG4gICAgICAgICAgICB0ZWFtMVdpbnM6IChyb3VuZCBhcyBXZWJSb3VuZCkudGVhbTFXaW5zIHx8IDAsXG4gICAgICAgICAgICB0ZWFtMldpbnM6IChyb3VuZCBhcyBXZWJSb3VuZCkudGVhbTJXaW5zIHx8IDAsXG4gICAgICAgICAgICB3aW5zTmVlZGVkOiAocm91bmQgYXMgV2ViUm91bmQpLndpbnNOZWVkZWQgfHwgNSxcbiAgICAgICAgICB9KSkgYXMgV2ViUm91bmRbXSxcbiAgICAgICAgICBzdHJlYW1pbmdNb2RlOlxuICAgICAgICAgICAgKHJhdy5zdHJlYW1pbmdNb2RlIGFzIFwibm9ybWFsXCIgfCBcInN0cmVhbWluZ1wiIHwgXCJtYW51YWxcIikgfHxcbiAgICAgICAgICAgIFwibm9ybWFsXCIsXG4gICAgICAgICAgbGFzdFdlYlVwZGF0ZTogdG9TYWZlRGF0ZShyYXcubGFzdFdlYlVwZGF0ZSksXG4gICAgICAgICAgcHVzaGVkQXQ6IHRvU2FmZURhdGUocmF3LnB1c2hlZEF0KSxcbiAgICAgICAgICBwdXNoZWRCeTogcmF3LnB1c2hlZEJ5IHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICB9XG4gICAgfSxcbiAgICAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsaXN0ZW5pbmcgdG8gc3RyZWFtaW5nIGRhdGE6XCIsIGVycm9yKTtcbiAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgIH1cbiAgKTtcbn07XG5cbi8vIEdldCBjdXJyZW50IHN0cmVhbWluZyBkYXRhIChvbmUtdGltZSByZWFkKVxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRTdHJlYW1pbmdEYXRhID1cbiAgYXN5bmMgKCk6IFByb21pc2U8V2ViVG91cm5hbWVudERhdGEgfCBudWxsPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0cmVhbWluZ1JlZiA9IGRvYyhkYiwgXCJzdHJlYW1pbmdcIiwgXCJhdnJ5emNxZWlicGh0ZWZpaG1zcmpmYnVnZXExXCIpO1xuICAgICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhzdHJlYW1pbmdSZWYpO1xuXG4gICAgICBpZiAoZG9jU25hcC5leGlzdHMoKSkge1xuICAgICAgICBjb25zdCByYXcgPSBkb2NTbmFwLmRhdGEoKSBhcyBGaXJlc3RvcmVEb2N1bWVudERhdGE7XG5cbiAgICAgICAgLy8gSGFuZGxlIG1vYmlsZSBhcHAncyBkYXRhIHN0cnVjdHVyZVxuICAgICAgICBjb25zdCBvdmVydmlldyA9IChyYXcub3ZlcnZpZXcgfHwge30pIGFzIERvY3VtZW50RGF0YTtcbiAgICAgICAgY29uc3Qgcm91bmRzRGF0YTogUm91bmRzRGF0YSA9IChyYXcucm91bmRzIHx8IHt9KSBhcyBSb3VuZHNEYXRhO1xuXG4gICAgICAgIGNvbnN0IGRhdGE6IFdlYlRvdXJuYW1lbnREYXRhID0ge1xuICAgICAgICAgIGlkOiByYXcuaWQgfHwgb3ZlcnZpZXcudG91cm5hbWVudElkIHx8IFwiY3VycmVudFwiLFxuICAgICAgICAgIG5hbWU6IG92ZXJ2aWV3LnRvdXJuYW1lbnROYW1lIHx8IHJhdy5uYW1lIHx8IFwiVG91cm5hbWVudFwiLFxuICAgICAgICAgIHN0YXR1czpcbiAgICAgICAgICAgIG92ZXJ2aWV3LnN0YXR1cyB8fFxuICAgICAgICAgICAgKHJhdy5zdGF0dXMgYXMgXCJzZXR1cFwiIHwgXCJsaXZlXCIgfCBcImNvbXBsZXRlZFwiKSB8fFxuICAgICAgICAgICAgXCJzZXR1cFwiLFxuICAgICAgICAgIGN1cnJlbnRSb3VuZDogb3ZlcnZpZXcuY3VycmVudFJvdW5kIHx8IHJhdy5jdXJyZW50Um91bmQgfHwgXCJcIixcbiAgICAgICAgICB0ZWFtczogQXJyYXkuaXNBcnJheShyYXcudGVhbXMpID8gcmF3LnRlYW1zIDogW10sXG4gICAgICAgICAgcm91bmRzOiAoQXJyYXkuaXNBcnJheShyb3VuZHNEYXRhKVxuICAgICAgICAgICAgPyByb3VuZHNEYXRhXG4gICAgICAgICAgICA6IE9iamVjdC5lbnRyaWVzKHJvdW5kc0RhdGEpXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoWywgcm91bmRdKSA9PiByb3VuZCAmJiB0eXBlb2Ygcm91bmQgPT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgLnNvcnQoKFtrZXlBXSwgW2tleUJdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAvLyBTb3J0IHJvdW5kcyBpbiBhIGNvbnNpc3RlbnQgb3JkZXI6IHNlbWlGaW5hbDEsIHNlbWlGaW5hbDIsIGZpbmFsXG4gICAgICAgICAgICAgICAgICBjb25zdCBvcmRlcjogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc2VtaUZpbmFsMTogMSxcbiAgICAgICAgICAgICAgICAgICAgc2VtaUZpbmFsMjogMixcbiAgICAgICAgICAgICAgICAgICAgZmluYWw6IDMsXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChvcmRlcltrZXlBXSB8fCA5OTkpIC0gKG9yZGVyW2tleUJdIHx8IDk5OSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAubWFwKChbLCByb3VuZF0pID0+IHJvdW5kKVxuICAgICAgICAgICkubWFwKChyb3VuZCkgPT4gKHtcbiAgICAgICAgICAgIC4uLihyb3VuZCBhcyBXZWJSb3VuZCksXG4gICAgICAgICAgICB0ZWFtMVdpbnM6IChyb3VuZCBhcyBXZWJSb3VuZCkudGVhbTFXaW5zIHx8IDAsXG4gICAgICAgICAgICB0ZWFtMldpbnM6IChyb3VuZCBhcyBXZWJSb3VuZCkudGVhbTJXaW5zIHx8IDAsXG4gICAgICAgICAgICB3aW5zTmVlZGVkOiAocm91bmQgYXMgV2ViUm91bmQpLndpbnNOZWVkZWQgfHwgNSxcbiAgICAgICAgICB9KSkgYXMgV2ViUm91bmRbXSxcbiAgICAgICAgICBzdHJlYW1pbmdNb2RlOlxuICAgICAgICAgICAgKHJhdy5zdHJlYW1pbmdNb2RlIGFzIFwibm9ybWFsXCIgfCBcInN0cmVhbWluZ1wiIHwgXCJtYW51YWxcIikgfHxcbiAgICAgICAgICAgIFwibm9ybWFsXCIsXG4gICAgICAgICAgbGFzdFdlYlVwZGF0ZTogdG9TYWZlRGF0ZShyYXcubGFzdFdlYlVwZGF0ZSksXG4gICAgICAgICAgcHVzaGVkQXQ6IHRvU2FmZURhdGUocmF3LnB1c2hlZEF0KSxcbiAgICAgICAgICBwdXNoZWRCeTogcmF3LnB1c2hlZEJ5IHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIGN1cnJlbnQgc3RyZWFtaW5nIGRhdGE6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcblxuLy8gTGlzdGVuIHRvIHRoZSBzdHJlYW0gY29udHJvbCBkb2N1bWVudCBpbiByZWFsLXRpbWVcbmV4cG9ydCBjb25zdCBsaXN0ZW5Ub1N0cmVhbUNvbnRyb2wgPSAoXG4gIGNhbGxiYWNrOiAoZGF0YTogU3RyZWFtQ29udHJvbERhdGEpID0+IHZvaWRcbikgPT4ge1xuICBjb25zdCBzdHJlYW1Db250cm9sUmVmID0gZG9jKGRiLCBcInN0cmVhbWluZ1wiLCBcImN1cnJlbnRfc3RyZWFtX2NvbnRyb2xcIik7XG4gIGNvbnNvbGUubG9nKFwiRklSRUJBU0U6IExpc3RlbmluZyB0byBzdHJlYW0gY29udHJvbCBkb2N1bWVudC4uLlwiKTtcblxuICByZXR1cm4gb25TbmFwc2hvdChcbiAgICBzdHJlYW1Db250cm9sUmVmLFxuICAgIChkb2MpID0+IHtcbiAgICAgIGlmIChkb2MuZXhpc3RzKCkpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJGSVJFQkFTRTogU3RyZWFtIGNvbnRyb2wgZGF0YSByZWNlaXZlZDpcIiwgZG9jLmRhdGEoKSk7XG4gICAgICAgIGNhbGxiYWNrKGRvYy5kYXRhKCkgYXMgU3RyZWFtQ29udHJvbERhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgXCJGSVJFQkFTRTogU3RyZWFtIGNvbnRyb2wgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QsIHByb3ZpZGluZyBkZWZhdWx0LlwiXG4gICAgICAgICk7XG4gICAgICAgIC8vIElmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LCBwcm92aWRlIGEgZGVmYXVsdCBzdGF0ZVxuICAgICAgICBjYWxsYmFjayh7IHN0cmVhbU1hdGNoZXM6IFtdLCBoaWRkZW5TZWN0aW9uczogW10gfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGSVJFQkFTRTogRXJyb3IgbGlzdGVuaW5nIHRvIHN0cmVhbSBjb250cm9sOlwiLCBlcnJvcik7XG4gICAgICAvLyBQcm92aWRlIGEgZGVmYXVsdCBzdGF0ZSBvbiBlcnJvciBhcyB3ZWxsXG4gICAgICBjYWxsYmFjayh7IHN0cmVhbU1hdGNoZXM6IFtdLCBoaWRkZW5TZWN0aW9uczogW10gfSk7XG4gICAgfVxuICApO1xufTtcblxuLy8gVXBkYXRlIHRoZSBzdHJlYW0gY29udHJvbCBkb2N1bWVudFxuZXhwb3J0IGNvbnN0IHVwZGF0ZVN0cmVhbUNvbnRyb2wgPSBhc3luYyAoZGF0YTogUGFydGlhbDxTdHJlYW1Db250cm9sRGF0YT4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdHJlYW1Db250cm9sUmVmID0gZG9jKGRiLCBcInN0cmVhbWluZ1wiLCBcImN1cnJlbnRfc3RyZWFtX2NvbnRyb2xcIik7XG4gICAgY29uc29sZS5sb2coXCJGSVJFQkFTRTogVXBkYXRpbmcgc3RyZWFtIGNvbnRyb2wgd2l0aCBkYXRhOlwiLCBkYXRhKTtcbiAgICAvLyBVc2Ugc2V0RG9jIHdpdGggbWVyZ2U6IHRydWUgdG8gY3JlYXRlIHRoZSBkb2MgaWYgaXQgZG9lc24ndCBleGlzdCBvciB1cGRhdGUgaXQgaWYgaXQgZG9lc1xuICAgIGF3YWl0IHNldERvYyhzdHJlYW1Db250cm9sUmVmLCBkYXRhLCB7IG1lcmdlOiB0cnVlIH0pO1xuICAgIGNvbnNvbGUubG9nKFwiRklSRUJBU0U6IFN0cmVhbSBjb250cm9sIHVwZGF0ZSBzdWNjZXNzZnVsLlwiKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRklSRUJBU0U6IEVycm9yIHVwZGF0aW5nIHN0cmVhbSBjb250cm9sOlwiLCBlcnJvcik7XG4gIH1cbn07XG5cbi8vIEV4cGxvcmUgZXhpc3RpbmcgRmlyZWJhc2UgZGF0YVxuZXhwb3J0IGNvbnN0IGV4cGxvcmVGaXJlYmFzZURhdGEgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCLwn5SNIEV4cGxvcmluZyBGaXJlYmFzZSBkYXRhLi4uXCIpO1xuICAgIGNvbnNvbGUubG9nKFwi4pqg77iPIE5vdGU6IFNvbWUgY29sbGVjdGlvbnMgbWF5IHJlcXVpcmUgYXV0aGVudGljYXRpb25cIik7XG5cbiAgICAvLyBUcnkgdG8gY2hlY2sgc3RyZWFtaW5nIGNvbGxlY3Rpb24gZmlyc3QgKG1vc3QgbGlrZWx5IHRvIGJlIGFjY2Vzc2libGUpXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0cmVhbWluZ1JlZiA9IGRvYyhkYiwgXCJzdHJlYW1pbmdcIiwgXCJhdnJ5emNxZWlicGh0ZWZpaG1zcmpmYnVnZXExXCIpO1xuICAgICAgY29uc3Qgc3RyZWFtaW5nRG9jID0gYXdhaXQgZ2V0RG9jKHN0cmVhbWluZ1JlZik7XG4gICAgICBpZiAoc3RyZWFtaW5nRG9jLmV4aXN0cygpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIPCfk6EgU3RyZWFtaW5nIGRhdGEgZm91bmQ6XCIsIHN0cmVhbWluZ0RvYy5kYXRhKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCLwn5OhIE5vIHN0cmVhbWluZyBkYXRhIGZvdW5kIChjb2xsZWN0aW9uIGV4aXN0cyBidXQgZW1wdHkpXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICBjb25zdCBmaXJlYmFzZUVycm9yID0gZXJyb3IgYXMgRmlyZWJhc2VFcnJvcjtcbiAgICAgIGlmIChmaXJlYmFzZUVycm9yLmNvZGUgPT09IFwicGVybWlzc2lvbi1kZW5pZWRcIikge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBcIuKdjCDwn5OhIFN0cmVhbWluZyBjb2xsZWN0aW9uOiBQZXJtaXNzaW9uIGRlbmllZCAobmVlZHMgYXV0aGVudGljYXRpb24pXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi4p2MIPCfk6EgU3RyZWFtaW5nIGNvbGxlY3Rpb24gZXJyb3I6XCIsIGZpcmViYXNlRXJyb3IubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGNoZWNrIHVzZXJzIGNvbGxlY3Rpb25cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlcnNSZWYgPSBjb2xsZWN0aW9uKGRiLCBcInVzZXJzXCIpO1xuICAgICAgY29uc3QgdXNlcnNTbmFwc2hvdCA9IGF3YWl0IGdldERvY3ModXNlcnNSZWYpO1xuICAgICAgY29uc29sZS5sb2coXCLinIUg8J+RpSBVc2VycyBmb3VuZDpcIiwgdXNlcnNTbmFwc2hvdC5kb2NzLmxlbmd0aCk7XG4gICAgICB1c2Vyc1NuYXBzaG90LmRvY3MuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAgIC0gVXNlciAke2RvYy5pZH06YCwgZG9jLmRhdGEoKSk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgY29uc3QgZmlyZWJhc2VFcnJvciA9IGVycm9yIGFzIEZpcmViYXNlRXJyb3I7XG4gICAgICBpZiAoZmlyZWJhc2VFcnJvci5jb2RlID09PSBcInBlcm1pc3Npb24tZGVuaWVkXCIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgXCLinYwg8J+RpSBVc2VycyBjb2xsZWN0aW9uOiBQZXJtaXNzaW9uIGRlbmllZCAobmVlZHMgYXV0aGVudGljYXRpb24pXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi4p2MIPCfkaUgVXNlcnMgY29sbGVjdGlvbiBlcnJvcjpcIiwgZmlyZWJhc2VFcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUcnkgdG8gY2hlY2sgZm9yIGFueSBvdGhlciBjb21tb24gY29sbGVjdGlvbnNcbiAgICBjb25zdCBjb21tb25Db2xsZWN0aW9ucyA9IFtcInRvdXJuYW1lbnRzXCIsIFwibWF0Y2hlc1wiLCBcInRlYW1zXCIsIFwicGxheWVyc1wiXTtcbiAgICBmb3IgKGNvbnN0IGNvbGxlY3Rpb25OYW1lIG9mIGNvbW1vbkNvbGxlY3Rpb25zKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjb2xsZWN0aW9uUmVmID0gY29sbGVjdGlvbihkYiwgY29sbGVjdGlvbk5hbWUpO1xuICAgICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvblJlZik7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGDinIUg8J+TgSAke2NvbGxlY3Rpb25OYW1lfSBjb2xsZWN0aW9uOiAke3NuYXBzaG90LmRvY3MubGVuZ3RofSBkb2N1bWVudHNgXG4gICAgICAgICk7XG4gICAgICAgIGlmIChzbmFwc2hvdC5kb2NzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzbmFwc2hvdC5kb2NzLnNsaWNlKDAsIDIpLmZvckVhY2goKGRvYykgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYCAgLSAke2NvbGxlY3Rpb25OYW1lfSAke2RvYy5pZH06YCwgZG9jLmRhdGEoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgIGNvbnN0IGZpcmViYXNlRXJyb3IgPSBlcnJvciBhcyBGaXJlYmFzZUVycm9yO1xuICAgICAgICBpZiAoZmlyZWJhc2VFcnJvci5jb2RlID09PSBcInBlcm1pc3Npb24tZGVuaWVkXCIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4p2MIPCfk4EgJHtjb2xsZWN0aW9uTmFtZX0gY29sbGVjdGlvbjogUGVybWlzc2lvbiBkZW5pZWRgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGDinYwg8J+TgSAke2NvbGxlY3Rpb25OYW1lfSBjb2xsZWN0aW9uIGVycm9yOmAsXG4gICAgICAgICAgICBmaXJlYmFzZUVycm9yLm1lc3NhZ2VcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCLwn5SNIEV4cGxvcmF0aW9uIGNvbXBsZXRlIVwiKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGV4cGxvcmluZyBGaXJlYmFzZTpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuLy8gPT09PT0gQVVUSEVOVElDQVRJT04gRlVOQ1RJT05TID09PT09XG5cbi8vIEVtYWlsIHZhbGlkYXRpb24gaGVscGVyXG5jb25zdCB2YWxpZGF0ZUVtYWlsID0gKGVtYWlsOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvO1xuICByZXR1cm4gZW1haWxSZWdleC50ZXN0KGVtYWlsKTtcbn07XG5cbi8vIFBhc3N3b3JkIHZhbGlkYXRpb24gaGVscGVyXG5jb25zdCB2YWxpZGF0ZVBhc3N3b3JkID0gKHBhc3N3b3JkOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgLy8gU3Ryb25nIHBhc3N3b3JkOiBtaW4gOCBjaGFycywgdXBwZXJjYXNlLCBsb3dlcmNhc2UsIG51bWJlciwgc3BlY2lhbCBjaGFyXG4gIGNvbnN0IHBhc3N3b3JkUmVnZXggPVxuICAgIC9eKD89LipbYS16XSkoPz0uKltBLVpdKSg/PS4qXFxkKSg/PS4qW0AkISUqPyZdKVtBLVphLXpcXGRAJCElKj8mXXs4LH0kLztcbiAgcmV0dXJuIHBhc3N3b3JkUmVnZXgudGVzdChwYXNzd29yZCk7XG59O1xuXG4vLyBDcmVhdGUgdXNlciB3aXRoIGVtYWlsIHZlcmlmaWNhdGlvblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVVzZXJXaXRoRW1haWxWZXJpZmljYXRpb24gPSBhc3luYyAoXG4gIGVtYWlsOiBzdHJpbmcsXG4gIHBhc3N3b3JkOiBzdHJpbmcsXG4gIGRpc3BsYXlOYW1lOiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIC8vIFZhbGlkYXRlIGlucHV0c1xuICAgIGlmICghdmFsaWRhdGVFbWFpbChlbWFpbCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZW1haWwgZm9ybWF0XCIpO1xuICAgIH1cbiAgICBpZiAoIXZhbGlkYXRlUGFzc3dvcmQocGFzc3dvcmQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMgd2l0aCB1cHBlcmNhc2UsIGxvd2VyY2FzZSwgbnVtYmVyLCBhbmQgc3BlY2lhbCBjaGFyYWN0ZXJcIlxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCFkaXNwbGF5TmFtZSB8fCBkaXNwbGF5TmFtZS50cmltKCkubGVuZ3RoIDwgMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmFtZSBtdXN0IGJlIGF0IGxlYXN0IDIgY2hhcmFjdGVyc1wiKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdXNlciBhY2NvdW50XG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoXG4gICAgICBhdXRoLFxuICAgICAgZW1haWwsXG4gICAgICBwYXNzd29yZFxuICAgICk7XG5cbiAgICAvLyBTZW5kIGVtYWlsIHZlcmlmaWNhdGlvblxuICAgIGF3YWl0IHNlbmRFbWFpbFZlcmlmaWNhdGlvbih1c2VyQ3JlZGVudGlhbC51c2VyKTtcblxuICAgIC8vIENyZWF0ZSB1c2VyIHByb2ZpbGUgaW4gRmlyZXN0b3JlXG4gICAgYXdhaXQgc2V0RG9jKGRvYyhkYiwgXCJ1c2Vyc1wiLCB1c2VyQ3JlZGVudGlhbC51c2VyLnVpZCksIHtcbiAgICAgIGRpc3BsYXlOYW1lOiBkaXNwbGF5TmFtZS50cmltKCksXG4gICAgICBlbWFpbCxcbiAgICAgIGVtYWlsVmVyaWZpZWQ6IGZhbHNlLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgaXNBZG1pbjogZmFsc2UsXG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdXNlcjogdXNlckNyZWRlbnRpYWwudXNlcixcbiAgICAgIG5lZWRzVmVyaWZpY2F0aW9uOiB0cnVlLFxuICAgICAgbWVzc2FnZTpcbiAgICAgICAgXCJBY2NvdW50IGNyZWF0ZWQhIFBsZWFzZSBjaGVjayB5b3VyIGVtYWlsIHRvIHZlcmlmeSB5b3VyIGFjY291bnQuXCIsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gY3JlYXRlIGFjY291bnRcIjtcbiAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIH1cbn07XG5cbi8vIFNpZ24gaW4gdXNlclxuZXhwb3J0IGNvbnN0IHNpZ25JblVzZXIgPSBhc3luYyAoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoXG4gICAgICBhdXRoLFxuICAgICAgZW1haWwsXG4gICAgICBwYXNzd29yZFxuICAgICk7XG5cbiAgICAvLyBDaGVjayBpZiBlbWFpbCBpcyB2ZXJpZmllZFxuICAgIGlmICghdXNlckNyZWRlbnRpYWwudXNlci5lbWFpbFZlcmlmaWVkKSB7XG4gICAgICBhd2FpdCBzaWduT3V0KGF1dGgpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIlBsZWFzZSB2ZXJpZnkgeW91ciBlbWFpbCBiZWZvcmUgc2lnbmluZyBpbi4gQ2hlY2sgeW91ciBpbmJveCBmb3IgdGhlIHZlcmlmaWNhdGlvbiBsaW5rLlwiXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbC51c2VyO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzaWduIGluXCI7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICB9XG59O1xuXG4vLyBTaWduIG91dCB1c2VyXG5leHBvcnQgY29uc3Qgc2lnbk91dFVzZXIgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgc2lnbk91dChhdXRoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gc2lnbiBvdXRcIjtcbiAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIH1cbn07XG5cbi8vIFJlc2VuZCBlbWFpbCB2ZXJpZmljYXRpb25cbmV4cG9ydCBjb25zdCByZXNlbmRFbWFpbFZlcmlmaWNhdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gYXV0aC5jdXJyZW50VXNlcjtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHVzZXIgbG9nZ2VkIGluXCIpO1xuICAgIH1cblxuICAgIGF3YWl0IHNlbmRFbWFpbFZlcmlmaWNhdGlvbih1c2VyKTtcbiAgICByZXR1cm4gXCJWZXJpZmljYXRpb24gZW1haWwgc2VudCEgUGxlYXNlIGNoZWNrIHlvdXIgaW5ib3guXCI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yXG4gICAgICAgID8gZXJyb3IubWVzc2FnZVxuICAgICAgICA6IFwiRmFpbGVkIHRvIHNlbmQgdmVyaWZpY2F0aW9uIGVtYWlsXCI7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICB9XG59O1xuXG4vLyBEZWxldGUgdXNlciBhY2NvdW50XG5leHBvcnQgY29uc3QgZGVsZXRlVXNlckFjY291bnQgPSBhc3luYyAocGFzc3dvcmQ6IHN0cmluZykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhdXRoLmN1cnJlbnRVc2VyO1xuICAgIGlmICghdXNlciB8fCAhdXNlci5lbWFpbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdXNlciBsb2dnZWQgaW5cIik7XG4gICAgfVxuXG4gICAgLy8gUmUtYXV0aGVudGljYXRlIHVzZXIgYmVmb3JlIGRlbGV0aW9uXG4gICAgY29uc3QgY3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodXNlci5lbWFpbCwgcGFzc3dvcmQpO1xuICAgIGF3YWl0IHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwodXNlciwgY3JlZGVudGlhbCk7XG5cbiAgICAvLyBEZWxldGUgdXNlciBkYXRhIGZyb20gRmlyZXN0b3JlXG4gICAgYXdhaXQgZGVsZXRlRG9jKGRvYyhkYiwgXCJ1c2Vyc1wiLCB1c2VyLnVpZCkpO1xuXG4gICAgLy8gRGVsZXRlIHVzZXIgYWNjb3VudFxuICAgIGF3YWl0IGRlbGV0ZVVzZXIodXNlcik7XG5cbiAgICByZXR1cm4gXCJBY2NvdW50IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc3QgZmlyZWJhc2VFcnJvciA9IGVycm9yIGFzIEZpcmViYXNlRXJyb3I7XG4gICAgY29uc3QgbWVzc2FnZSA9IGZpcmViYXNlRXJyb3IubWVzc2FnZSB8fCBcIkZhaWxlZCB0byBkZWxldGUgYWNjb3VudFwiO1xuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgfVxufTtcblxuLy8gR2V0IGN1cnJlbnQgdXNlclxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRVc2VyID0gKCkgPT4ge1xuICByZXR1cm4gYXV0aC5jdXJyZW50VXNlcjtcbn07XG5cbi8vIENoZWNrIGlmIHVzZXIgaXMgYXV0aGVudGljYXRlZFxuZXhwb3J0IGNvbnN0IGlzVXNlckF1dGhlbnRpY2F0ZWQgPSAoKSA9PiB7XG4gIHJldHVybiAhIWF1dGguY3VycmVudFVzZXI7XG59O1xuXG4vLyBDaGVjayBpZiB1c2VyIGVtYWlsIGlzIHZlcmlmaWVkXG5leHBvcnQgY29uc3QgaXNFbWFpbFZlcmlmaWVkID0gKCkgPT4ge1xuICByZXR1cm4gYXV0aC5jdXJyZW50VXNlcj8uZW1haWxWZXJpZmllZCB8fCBmYWxzZTtcbn07XG5cbi8vIFNlbmQgcGFzc3dvcmQgcmVzZXQgZW1haWxcbmV4cG9ydCBjb25zdCBzZW5kUGFzc3dvcmRSZXNldCA9IGFzeW5jIChlbWFpbDogc3RyaW5nKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gVmFsaWRhdGUgZW1haWwgZm9ybWF0XG4gICAgaWYgKCF2YWxpZGF0ZUVtYWlsKGVtYWlsKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBlbWFpbCBmb3JtYXRcIik7XG4gICAgfVxuXG4gICAgYXdhaXQgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChhdXRoLCBlbWFpbCk7XG4gICAgcmV0dXJuIFwiUGFzc3dvcmQgcmVzZXQgZW1haWwgc2VudCEgUGxlYXNlIGNoZWNrIHlvdXIgaW5ib3ggYW5kIGZvbGxvdyB0aGUgaW5zdHJ1Y3Rpb25zLlwiO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnN0IGZpcmViYXNlRXJyb3IgPSBlcnJvciBhcyBGaXJlYmFzZUVycm9yO1xuICAgIC8vIEhhbmRsZSBzcGVjaWZpYyBGaXJlYmFzZSBlcnJvcnNcbiAgICBpZiAoZmlyZWJhc2VFcnJvci5jb2RlID09PSBcImF1dGgvdXNlci1ub3QtZm91bmRcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYWNjb3VudCBmb3VuZCB3aXRoIHRoaXMgZW1haWwgYWRkcmVzc1wiKTtcbiAgICB9IGVsc2UgaWYgKGZpcmViYXNlRXJyb3IuY29kZSA9PT0gXCJhdXRoL2ludmFsaWQtZW1haWxcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBlbWFpbCBhZGRyZXNzXCIpO1xuICAgIH0gZWxzZSBpZiAoZmlyZWJhc2VFcnJvci5jb2RlID09PSBcImF1dGgvdG9vLW1hbnktcmVxdWVzdHNcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIlRvbyBtYW55IHBhc3N3b3JkIHJlc2V0IGF0dGVtcHRzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiXG4gICAgICApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBmaXJlYmFzZUVycm9yLm1lc3NhZ2UgfHwgXCJGYWlsZWQgdG8gc2VuZCBwYXNzd29yZCByZXNldCBlbWFpbFwiXG4gICAgKTtcbiAgfVxufTtcblxuLy8gVXBkYXRlIHBhc3N3b3JkIChmb3IgbG9nZ2VkLWluIHVzZXJzKVxuZXhwb3J0IGNvbnN0IHVwZGF0ZVVzZXJQYXNzd29yZCA9IGFzeW5jIChcbiAgY3VycmVudFBhc3N3b3JkOiBzdHJpbmcsXG4gIG5ld1Bhc3N3b3JkOiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhdXRoLmN1cnJlbnRVc2VyO1xuICAgIGlmICghdXNlciB8fCAhdXNlci5lbWFpbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdXNlciBsb2dnZWQgaW5cIik7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgbmV3IHBhc3N3b3JkXG4gICAgaWYgKCF2YWxpZGF0ZVBhc3N3b3JkKG5ld1Bhc3N3b3JkKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIk5ldyBwYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycyB3aXRoIHVwcGVyY2FzZSwgbG93ZXJjYXNlLCBudW1iZXIsIGFuZCBzcGVjaWFsIGNoYXJhY3RlclwiXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFJlLWF1dGhlbnRpY2F0ZSB1c2VyXG4gICAgY29uc3QgY3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwoXG4gICAgICB1c2VyLmVtYWlsLFxuICAgICAgY3VycmVudFBhc3N3b3JkXG4gICAgKTtcbiAgICBhd2FpdCByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsKHVzZXIsIGNyZWRlbnRpYWwpO1xuXG4gICAgLy8gVXBkYXRlIHBhc3N3b3JkXG4gICAgYXdhaXQgdXBkYXRlUGFzc3dvcmQodXNlciwgbmV3UGFzc3dvcmQpO1xuXG4gICAgcmV0dXJuIFwiUGFzc3dvcmQgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBmaXJlYmFzZUVycm9yID0gZXJyb3IgYXMgRmlyZWJhc2VFcnJvcjtcbiAgICBpZiAoZmlyZWJhc2VFcnJvci5jb2RlID09PSBcImF1dGgvd3JvbmctcGFzc3dvcmRcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ3VycmVudCBwYXNzd29yZCBpcyBpbmNvcnJlY3RcIik7XG4gICAgfSBlbHNlIGlmIChmaXJlYmFzZUVycm9yLmNvZGUgPT09IFwiYXV0aC93ZWFrLXBhc3N3b3JkXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5ldyBwYXNzd29yZCBpcyB0b28gd2Vha1wiKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGZpcmViYXNlRXJyb3IubWVzc2FnZSB8fCBcIkZhaWxlZCB0byB1cGRhdGUgcGFzc3dvcmRcIik7XG4gIH1cbn07XG5cbmV4cG9ydCB7IGRiLCBhdXRoIH07XG4iXSwibmFtZXMiOlsiaW5pdGlhbGl6ZUFwcCIsImdldEZpcmVzdG9yZSIsImRvYyIsIm9uU25hcHNob3QiLCJnZXREb2MiLCJjb2xsZWN0aW9uIiwiZ2V0RG9jcyIsInNldERvYyIsImRlbGV0ZURvYyIsImdldEF1dGgiLCJjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCIsInNpZ25PdXQiLCJzZW5kRW1haWxWZXJpZmljYXRpb24iLCJzZW5kUGFzc3dvcmRSZXNldEVtYWlsIiwiZGVsZXRlVXNlciIsInVwZGF0ZVBhc3N3b3JkIiwicmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCIsIkVtYWlsQXV0aFByb3ZpZGVyIiwiZmlyZWJhc2VDb25maWciLCJ2YWxpZGF0ZUZpcmViYXNlQ29uZmlnIiwiYXBwIiwiZGIiLCJhdXRoIiwidG9TYWZlRGF0ZSIsInZhbHVlIiwiRGF0ZSIsImQiLCJpc05hTiIsImdldFRpbWUiLCJ0b0RhdGUiLCJsaXN0ZW5Ub1N0cmVhbWluZ0RhdGEiLCJjYWxsYmFjayIsImNvbnNvbGUiLCJsb2ciLCJzdHJlYW1pbmdSZWYiLCJleGlzdHMiLCJyYXciLCJkYXRhIiwib3ZlcnZpZXciLCJyb3VuZHNEYXRhIiwicm91bmRzIiwidGVhbXMiLCJjaGFtcGlvbiIsIk9iamVjdCIsImtleXMiLCJ0ZWFtc0RhdGEiLCJ0ZWFtTGlzdCIsInBhcnRpY2lwYW50cyIsImVudHJpZXMiLCJmb3JFYWNoIiwicm91bmRLZXkiLCJyb3VuZERhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJtYXRjaGVzIiwicm91bmQiLCJtYXRjaCIsIm1hdGNoSW5kZXgiLCJtYXRjaE9iaiIsInRlYW0xIiwidGVhbTIiLCJsZW5ndGgiLCJ0ZWFtTWFwIiwiTWFwIiwidmFsdWVzIiwicm91bmRJbmRleCIsIm1hdGNoRGF0YSIsImlkIiwibmFtZSIsInRyaW0iLCJoYXMiLCJwbGF5ZXJzIiwicGxheWVyTmFtZXMiLCJyYXdQbGF5ZXJOYW1lcyIsInNwbGl0IiwidHJpbW1lZFBsYXllck5hbWVzIiwibWFwIiwiZmlsdGVyIiwiaXNWYWxpZCIsInBsYXllck5hbWUiLCJpbmRleCIsInB1c2giLCJjYXB0YWluIiwic2V0IiwibWFuYWdlciIsImNvbG9yIiwiaWNvbiIsImZyb20iLCJ0ZWFtIiwicGxheWVyIiwicGxheWVySW5kZXgiLCJ0b3VybmFtZW50SWQiLCJ0b3VybmFtZW50TmFtZSIsInN0YXR1cyIsImN1cnJlbnRSb3VuZCIsInNvcnQiLCJrZXlBIiwia2V5QiIsIm9yZGVyIiwic2VtaUZpbmFsMSIsInNlbWlGaW5hbDIiLCJmaW5hbCIsInRlYW0xV2lucyIsInRlYW0yV2lucyIsIndpbnNOZWVkZWQiLCJzdHJlYW1pbmdNb2RlIiwibGFzdFdlYlVwZGF0ZSIsInB1c2hlZEF0IiwicHVzaGVkQnkiLCJlcnJvciIsImdldEN1cnJlbnRTdHJlYW1pbmdEYXRhIiwiZG9jU25hcCIsImxpc3RlblRvU3RyZWFtQ29udHJvbCIsInN0cmVhbUNvbnRyb2xSZWYiLCJzdHJlYW1NYXRjaGVzIiwiaGlkZGVuU2VjdGlvbnMiLCJ1cGRhdGVTdHJlYW1Db250cm9sIiwibWVyZ2UiLCJleHBsb3JlRmlyZWJhc2VEYXRhIiwic3RyZWFtaW5nRG9jIiwiZmlyZWJhc2VFcnJvciIsImNvZGUiLCJtZXNzYWdlIiwidXNlcnNSZWYiLCJ1c2Vyc1NuYXBzaG90IiwiZG9jcyIsImNvbW1vbkNvbGxlY3Rpb25zIiwiY29sbGVjdGlvbk5hbWUiLCJjb2xsZWN0aW9uUmVmIiwic25hcHNob3QiLCJzbGljZSIsInZhbGlkYXRlRW1haWwiLCJlbWFpbCIsImVtYWlsUmVnZXgiLCJ0ZXN0IiwidmFsaWRhdGVQYXNzd29yZCIsInBhc3N3b3JkIiwicGFzc3dvcmRSZWdleCIsImNyZWF0ZVVzZXJXaXRoRW1haWxWZXJpZmljYXRpb24iLCJkaXNwbGF5TmFtZSIsIkVycm9yIiwidXNlckNyZWRlbnRpYWwiLCJ1c2VyIiwidWlkIiwiZW1haWxWZXJpZmllZCIsImNyZWF0ZWRBdCIsImlzQWRtaW4iLCJuZWVkc1ZlcmlmaWNhdGlvbiIsInNpZ25JblVzZXIiLCJzaWduT3V0VXNlciIsInJlc2VuZEVtYWlsVmVyaWZpY2F0aW9uIiwiY3VycmVudFVzZXIiLCJkZWxldGVVc2VyQWNjb3VudCIsImNyZWRlbnRpYWwiLCJnZXRDdXJyZW50VXNlciIsImlzVXNlckF1dGhlbnRpY2F0ZWQiLCJpc0VtYWlsVmVyaWZpZWQiLCJzZW5kUGFzc3dvcmRSZXNldCIsInVwZGF0ZVVzZXJQYXNzd29yZCIsImN1cnJlbnRQYXNzd29yZCIsIm5ld1Bhc3N3b3JkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/services/firebase.ts\n"));

/***/ })

});